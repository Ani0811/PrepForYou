generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model ai_outputs {
  id          String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  topic_id    String?   @db.Uuid
  action      String
  source_type String
  content     String
  created_at  DateTime? @default(now()) @db.Timestamp(6)
  topics      topics?   @relation(fields: [topic_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model materials {
  id         String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  topic_id   String?   @db.Uuid
  type       String
  content    String
  created_at DateTime? @default(now()) @db.Timestamp(6)
  topics     topics?   @relation(fields: [topic_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model reflections {
  id         String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  topic_id   String?   @db.Uuid
  user_id    String?   @db.Uuid
  learned    String
  created_at DateTime? @default(now()) @db.Timestamp(6)
  topics     topics?   @relation(fields: [topic_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users      users?    @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model reviews {
  id               String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  topic_id         String?   @db.Uuid
  user_id          String?   @db.Uuid
  confidence_level String
  reviewed_at      DateTime? @default(now()) @db.Timestamp(6)
  topics           topics?   @relation(fields: [topic_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users            users?    @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model subjects {
  id         String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id    String?   @db.Uuid
  title      String
  created_at DateTime? @default(now()) @db.Timestamp(6)
  users      users?    @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  topics     topics[]
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model topics {
  id          String        @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  subject_id  String?       @db.Uuid
  title       String
  status      String?       @default("new")
  created_at  DateTime?     @default(now()) @db.Timestamp(6)
  ai_outputs  ai_outputs[]
  materials   materials[]
  reflections reflections[]
  reviews     reviews[]
  subjects    subjects?     @relation(fields: [subject_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model users {
  id            String        @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  clerk_user_id String
  email         String
  name          String?
  role          String?       @default(dbgenerated("USER"))
  created_at    DateTime?     @default(now()) @db.Timestamp(6)
  reflections   reflections[]
  reviews       reviews[]
  subjects      subjects[]
}
